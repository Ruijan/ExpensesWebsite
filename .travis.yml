services:
- mysql

language: php

php:
- 7.2.10

notifications:
  email: false

addons:
  sonarcloud:
    organization: ruijan-github
    projectKey: ExpensesWebsite
    token:
      secure: d9e4828f4e74c9534dc0ea9c8cb56ab8d6733491

install:
- composer require --dev phpunit/phpunit ^7.4
- curl -s http://getcomposer.org/installer | php
- php composer.phar install -n

script:
- php vendor/bin/phpunit --configuration phpunit.xml --coverage-clover build/logs/clover.xml
- sonar-scanner

after_success:
- bash <(curl -s https://codecov.io/bash)
- php vendor/bin/codacycoverage clover build/logs/clover.xml
